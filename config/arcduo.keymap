#include <behaviors.dtsi>
#include <dt-bindings/zmk/bt.h>
#include <dt-bindings/zmk/keys.h>
#include <dt-bindings/zmk/pointing.h>
#include <dt-bindings/zmk/mouse.h>
#include <dt-bindings/zmk/outputs.h>
#include <behaviors/mouse_keys.dtsi>
#include <dt-bindings/zmk/ext_power.h>
#include "combos.dtsi"
#include "macros.dtsi"
#include "behaviors.dtsi"

/ {

// ╭──────┬──────┬──────┬──────┬──────╮                ╭──────┬──────┬──────┬──────┬──────╮
//    00     01     02     03    04                       05     06     07     08     09
// ├──────┼──────┼──────┼──────┼──────┤                ├──────┼──────┼──────┼──────┼──────┤
//    10     11     12     13    14                       15     16     17     18     19
// ├──────┼──────┼──────┼──────┼──────┤                ├──────┼──────┼──────┼──────┼──────┤
//    20     21     22     23    24                       25     26     27     28     29
// ╰──────┴──────┴──────┼──────┼──────┼──────╮  ╭──────┼──────┼──────┴──────┴──────┴──────╯
//                         30     31     32        33     34     35
//                      ╰──────┴──────┴──────╯  ╰──────┴──────┴──────╯
// #define BASE    0
// #define NUM     1
// #define NAV     2
// #define SYM     3
// #define EXTRAS  4
// #define MOUSE   5

  keymap {
        compatible = "zmk,keymap";
        BASE {
            display-name = "Base";     
            bindings = <
// ╭────────────────┬────────────────┬────────────────┬────────────────┬────────────────╮                                           ╭────────────────┬────────────────┬────────────────┬────────────────┬────────────────╮
     &kp Q            &kp W            &kp E            &kp R            &kp T                                                        &kp Y            &kp U            &kp I            &kp O            &kp P
// ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤                                           ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤
     &hml LCMD A      &hml LALT S      &hml LCTRL D     &hml LSHIFT F    &lt 8 G                                                      &kp H            &hmr RSHIFT J    &hmr RCTRL K     &hmr RALT L      &hmr RCMD SEMI
// ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤                                           ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤
     &kp Z            &kp X            &kp C            &kp V            &kp B                                                        &kp N            &kp M            &kp COMMA        &kp PERIOD       &kp SLASH
// ╰────────────────┴────────────────┴────────────────┼────────────────┼────────────────┼────────────────╮       ╭──────────────────┼────────────────┼────────────────┴────────────────┴────────────────┴────────────────╯
                                                        &td_tab          &mkp LCLK        &lt 4 RETURN             &lt 5 RETURN       &td_space        &td_bs                          
                                                   // ╰────────────────┴────────────────┴────────────────╯       ╰──────────────────┴────────────────┴────────────────╯
            >;
        };

        NUM {
            display-name = "Num";     
            bindings = <
// ╭────────────────┬────────────────┬────────────────┬────────────────┬────────────────╮                                           ╭────────────────┬────────────────┬────────────────┬────────────────┬────────────────╮
     &none            &none            &none            &none            &none                                                        &kp ASTRK        &hm F7 N7        &hm F8 N8        &hm F9 N9        &kp F10
// ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤                                           ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤
     &none            &none            &none            &none            &none                                                        &kp MINUS        &hm F4 N4        &hm F5 N5        &hm F6 N6        &hm F11 PLUS
// ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤                                           ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤
     &none            &none            &none            &kp BACKSPACE    &kp SPACE                                                    &td_equals       &hm F1 N1        &hm F2 N2        &hm F3 N3        &hm F12 SLASH
// ╰────────────────┴────────────────┴────────────────┼────────────────┼────────────────┼────────────────╮       ╭──────────────────┼────────────────┼────────────────┴────────────────┴────────────────┴────────────────╯
                                                        &none            &none            &trans                   &kp DOT            &kp N0           &none                          
                                                   // ╰────────────────┴────────────────┴────────────────╯       ╰──────────────────┴────────────────┴────────────────╯
            >;
        };

        NAV {
            display-name = "Nav";     
            bindings = <
// ╭────────────────┬────────────────┬────────────────┬────────────────┬────────────────╮                                           ╭────────────────┬────────────────┬────────────────┬────────────────┬────────────────╮
     &none            &none            &none            &none            &none                                                        &detach_session  &create_or_attach &kp UP           &show_sessions   &sync_panes
// ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤                                           ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤
     &trans           &trans           &trans           &trans           &none                                                        &h_split         &kp LEFT_ARROW   &kp DOWN         &kp RIGHT_ARROW  &kp RETURN
// ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤                                           ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤
     &none            &none            &none            &none            &none                                                        &v_split         &kp HOME         &kp PG_DN        &kp PG_UP        &kp END
// ╰────────────────┴────────────────┴────────────────┼────────────────┼────────────────┼────────────────╮       ╭──────────────────┼────────────────┼────────────────┴────────────────┴────────────────┴────────────────╯
                                                        &none            &none            &trans                   &trans             &trans           &none                          
                                                   // ╰────────────────┴────────────────┴────────────────╯       ╰──────────────────┴────────────────┴────────────────╯
            >;
        };

        SYM {
            display-name = "Symbols";     
            bindings = <
// ╭────────────────┬────────────────┬────────────────┬────────────────┬────────────────╮                                           ╭────────────────┬────────────────┬────────────────┬────────────────┬────────────────╮
     &none            &none            &none            &none            &none                                                        &kp ASTRK        &kp AMPS         &kp LEFT_BRACE   &kp DLLR         &td_grave
// ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤                                           ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤
     &none            &none            &none            &trans           &none                                                        &td_hyphen       &kp SEMI         &kp LPAR         &kp LBKT         &kp PLUS
// ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤                                           ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤
     &none            &none            &none            &none            &none                                                        &kp AT_SIGN      &kp UNDERSCORE   &kp LT           &kp HASH         &kp PRCNT
// ╰────────────────┴────────────────┴────────────────┼────────────────┼────────────────┼────────────────╮       ╭──────────────────┼────────────────┼────────────────┴────────────────┴────────────────┴────────────────╯
                                                        &trans           &trans           &trans                   &trans             &trans           &none                          
                                                   // ╰────────────────┴────────────────┴────────────────╯       ╰──────────────────┴────────────────┴────────────────╯
            >;
        };


        EXTRAS {
            display-name = "Extra";     
            bindings = <
// ╭────────────────┬────────────────┬────────────────┬────────────────┬────────────────╮                                           ╭────────────────┬────────────────┬────────────────┬────────────────┬────────────────╮
     &shrug           &lgtm            &gcm             &none            &kp C_BRI_INC                                                &bt BT_SEL(0)    &bt BT_SEL(1)    &bt BT_SEL(2)    &bt BT_SEL(3)    &out OUT_TOG
// ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤                                           ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤
     &sudo            &none            &none            &none            &kp C_BRI_DEC                                                &none            &kp C_PREV       &kp C_PP         &kp C_STOP       &kp C_NEXT
// ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤                                           ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤
     &none            &none            &none            &none            &none                                                        &new_dir         &kp K_MUTE       &kp C_VOL_DN     &kp C_VOL_UP     &studio_unlock
// ╰────────────────┴────────────────┴────────────────┼────────────────┼────────────────┼────────────────╮       ╭──────────────────┼────────────────┼────────────────┴────────────────┴────────────────┴────────────────╯
                                                        &none            &none            &none                    &none              &none            &bt BT_CLR                         
                                                   // ╰────────────────┴────────────────┴────────────────╯       ╰──────────────────┴────────────────┴────────────────╯           
            >;
        };

        MOUSE {
            display-name = "Mouse";     
            bindings = <
// ╭────────────────┬────────────────┬────────────────┬────────────────┬────────────────╮                                           ╭────────────────┬────────────────┬────────────────┬────────────────┬────────────────╮
     &msc SCRL_LEFT   &msc SCRL_UP     &mmv MOVE_UP     &msc SCRL_DOWN   &msc SCRL_RIGHT                                              &none             &none            &none            &none            &none
// ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤                                           ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤
     &mkp MB4         &mmv MOVE_LEFT   &mmv MOVE_DOWN   &mmv MOVE_RIGHT  &mkp MB5                                                     &none             &kp RSHIFT       &kp RCTRL        &kp LALT         &kp LCMD
// ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤                                           ├────────────────┼────────────────┼────────────────┼────────────────┼────────────────┤
     &kp C_AC_UNDO    &kp C_AC_CUT     &kp C_AC_COPY    &kp C_AC_PASTE   &mkp MCLK                                                    &none             &none            &none            &none            &none
// ╰────────────────┴────────────────┴────────────────┼────────────────┼────────────────┼────────────────╮       ╭──────────────────┼────────────────┼────────────────┴────────────────┴────────────────┴────────────────╯
                                                        &trans           &trans           &trans                   &kp RETURN         &trans            &none                          
                                                   // ╰────────────────┴────────────────┴────────────────╯       ╰──────────────────┴────────────────┴────────────────╯           
            >;
        };
};